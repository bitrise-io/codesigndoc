format_version: 1.3.0
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

title: Template configuration.
summary: |-
  Template 'bitrise.yml', generated by 'bitrise init'.
description: |-
  Configuration (environments) specified in 'app' will be available
    for every workflow.

  The Trigger Map ('trigger_map') defines mapping between trigger patterns
    and workflows.
  You can run workflows directly with bitrise: bitrise run workflow-name
    Or you can 'trigger' a build: bitrise trigger some-pattern

   With this example 'trigger_map' if you 'bitrise trigger test'
    or 'bitrise trigger test-1' or specify any other pattern
    which starts with 'test' then the 'test' workflow will be used.
   In any other case (ex: 'bitrise trigger something-else') the
    workflow called 'fallback' will be used.

  Workflows ('workflows') are where you can define different, separate scenarios,
    which you can then 'bitrise run' or 'bitrise trigger'.

app:
  envs:
  - BITRISE_APP_TITLE: "lesson_6"
  - BITRISE_DEV_BRANCH: "master"

trigger_map:
- pattern: test**
  is_pull_request_allowed: true
  workflow: test
- pattern: "**feature**"
  is_pull_request_allowed: true
  workflow: feature
- pattern: "**develop"
  is_pull_request_allowed: true
  workflow: develop
- pattern: master
  is_pull_request_allowed: true
  workflow: master
- pattern: "*"
  is_pull_request_allowed: true
  workflow: fallback

workflows:
  test:
    steps:
    - script:
        title: Fallback
        inputs:
        - content: |-
            #!/bin/bash
            echo "This is the test workflow, used"
            echo " if you 'bitrise trigger' a build and the pattern"
            echo " starts with "test""
  feature:
    steps:
    - script:
        title: Fallback
        inputs:
        - content: |-
            #!/bin/bash
            echo "This is the feature workflow, used"
            echo " if you 'bitrise trigger' a build and the pattern"
            echo " contains the "feature" expression"
  develop:
    steps:
    - script:
        title: Fallback
        inputs:
        - content: |-
            #!/bin/bash
            echo "This is a the develop workflow, used"
            echo " if you 'bitrise trigger' a build and the pattern"
            echo " ends with the "develop" expression"
  master:
    steps:
    - script:
        title: Fallback
        inputs:
        - content: |-
            #!/bin/bash
            echo "This is a the master workflow, used"
            echo " if you 'bitrise trigger' a build and the pattern"
            echo " matches the "master" pattern in the trigger_map"
  fallback:
    steps:
    - script:
        title: Fallback
        inputs:
        - content: |-
            #!/bin/bash
            echo "This is a the fallback workflow, used"
            echo " if you 'bitrise trigger' a build but the pattern"
            echo " does not match any other pattern in the trigger_map"
